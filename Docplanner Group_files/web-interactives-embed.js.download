!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};e[i].call(n.exports,n,n.exports,s);n.l=!0;return n.exports}s.m=e;s.c=t;s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})};s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};s.t=function(e,t){1&t&&(e=s(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);s.r(i);Object.defineProperty(i,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i};s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};s.d(t,"a",t);return t};s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};s.p="//static.hsappstatic.net/web-interactives-embed/static-2.561/";s(s.s=20)}([function(e,t,s){"use strict";var i=s(1);s.d(t,"MessageTypes",(function(){return i.a}));var n=s(2);s.d(t,"setStyleOnElement",(function(){return n.a}));var r=s(21);s.d(t,"GlobalIframeCommunication",(function(){return r.a}));s.d(t,"createFrameComponent",(function(){return r.b}));var o=s(6);s.d(t,"Store",(function(){return o.a}));s(22);var a=s(23);s.d(t,"ParentApplicationController",(function(){return a.a}));var c=s(11);s.o(c,"createElementObserver")&&s.d(t,"createElementObserver",(function(){return c.createElementObserver}));s.o(c,"createQueue")&&s.d(t,"createQueue",(function(){return c.createQueue}));s.o(c,"filterMap")&&s.d(t,"filterMap",(function(){return c.filterMap}));s.o(c,"listenForEscPress")&&s.d(t,"listenForEscPress",(function(){return c.listenForEscPress}));s.o(c,"mergeMaps")&&s.d(t,"mergeMaps",(function(){return c.mergeMaps}));s.o(c,"navigatePage")&&s.d(t,"navigatePage",(function(){return c.navigatePage}));s.o(c,"sortMap")&&s.d(t,"sortMap",(function(){return c.sortMap}));var l=s(7);s.d(t,"createQueue",(function(){return l.a}));s(9);var h=s(12);s.d(t,"createElementObserver",(function(){return h.a}));var d=s(13);s.d(t,"filterMap",(function(){return d.a}));s.d(t,"mergeMaps",(function(){return d.b}));s.d(t,"sortMap",(function(){return d.c}));var u=s(10);s.d(t,"navigatePage",(function(){return u.a}));var m=s(14);s.d(t,"listenForEscPress",(function(){return m.a}))},function(e,t,s){"use strict";const i={RECEIVED_ANALYTICS:"HS_CTA_PARENT_RECEIVED_ANALYTICS",DEVICE_TYPE:"HS_CTA_PARENT_DEVICE_TYPE",PROXY_ANALYTICS_FN_CALLBACK:"HS_CTA_PARENT_PROXY_ANALYTICS_FN",INIT:"HS_CTA_PARENT_INIT",STARTED:"HS_CTA_STARTED",NAVIGATE_PAGE:"HS_CTA_NAVIGATE_PAGE",CLICK_EVENT:"HS_CTA_CLICK_EVENT",CLOSE_INTERACTIVE:"HS_CTA_CLOSE_INTERACTIVE",HAS_CLOSED:"HS_CTA_HAS_CLOSED",NEW_HEIGHT:"HS_CTA_NEW_HEIGHT",DISPLAY_CALL_TO_ACTION:"HS_DISPLAY_CALL_TO_ACTION",PROXY_ANALYTICS:"HS_CTA_PROXY_ANALYTICS",PROXY_ANALYTICS_FN:"HS_CTA_PROXY_ANALYTICS_FN",SEND_FORM_DEFINITION:"HS_SEND_FORM_DEFINITION",SEND_CTA_CONFIG:"HS_SEND_CTA_CONFIG",SEND_EMBED_CONTEXT:"HS_SEND_EMBED_CONTEXT",RECEIVE_FILTERED_STYLESHEETS:"RECEIVE_FILTERED_STYLESHEETS",SEND_STYLESHEETS:"SEND_STYLESHEETS",RENDER_RECAPTCHA:"RENDER_RECAPTCHA",EXECUTE_RECAPTCHA:"EXECUTE_RECAPTCHA",RESET_RECAPTCHA:"RESET_RECAPTCHA",RECAPTCHA_SUCCESS:"RECAPTCHA_SUCCESS",RECAPTCHA_EXPIRED:"RECAPTCHA_EXPIRED",TRIGGER_CTA:"HS_CTA_TRIGGER_CTA",OVERRIDE_BODY_HEIGHT:"HS_CTA_OVERIDE_BODY_HEIGHT"};t.a=i},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));function i(e,t={}){for(const s in t)Object.hasOwnProperty.call(t,s)&&(e.style[s]=t[s])}},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));function i(...e){if(window.location.search.indexOf("hs_debug_interactive")>-1||window.location.host.includes("local.hsappstatic")){console.log("[web-interactives-embed]",...e);window.location.search.indexOf("hs_is_selenium")>-1&&console.log(...[...e].map(e=>JSON.stringify(e)))}}},function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));class i{constructor(){this.liseners=new Map}on(e,t){if(!this.liseners.has(e)){this.liseners.set(e,[t]);return}const s=this.liseners.get(e);this.liseners.set(e,[...s,t])}off(e){this.liseners.delete(e)}emit(e,t){const s=this.liseners.get(e);s&&s.length&&s.forEach(e=>e(t))}reset(){this.liseners=new Map}}function n(){return new i}},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));s.d(t,"b",(function(){return n}));function i(e,t,s){e.startsWith("http")||(e="https://"+e);const i=new URL(e);i.searchParams.set(t,s);return i.href}function n(e,t){e.startsWith("http")||(e="https://"+e);if(0===Object.keys(t).length)return e;const s=new URL(e);Object.keys(t).forEach(e=>s.searchParams.set(e,t[e]));return s.href}},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));class i{constructor(e,t){this.listeners=new Set;this.batching=!1;this.queue=[];this.subscribe=e=>{this.listeners.add(e);let t=()=>{};this.options&&this.options.onSubscribe&&(t=this.options.onSubscribe(e,this));return()=>{this.listeners.delete(e);t()}};this.setState=e=>{const t=this.state;this.options&&this.options.updateFn?this.state=this.options.updateFn(t)(e):this.state=e(t);if(this.state!==t){this.queue.push(()=>{this.listeners.forEach(e=>e(this.state,t));this.options&&this.options.onUpdate&&this.options.onUpdate(this.state,t)});this._flush()}};this._flush=()=>{if(!this.batching){this.queue.forEach(e=>e());this.queue=[]}};this.batch=e=>{this.batching=!0;e();this.batching=!1;this._flush()};this.state=e;this.options=t}}},function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));class i{constructor(){this.storage=[]}enqueue(e){this.storage.push(e)}dequeue(){return this.storage.shift()}peek(){return this.storage[0]}size(){return this.storage.length}}function n(){return new i}},function(e,t,s){"use strict";var i=s(3);const n=(...e)=>{Object(i.a)("[populateLinksWithTrackingParams]",...e)},r=["currentUrl","referrer","canon","canonicalUrl","pageUrl","contentType","encryptedPayload","pageId","analyticsPageId","hutk","hstc","hssc","hsfp","utk","containerType","webInteractiveId","webInteractiveContentId","campaignGuid","userAgent","timeStarted","timeFinished","redirectUrl","skip","includeInitial","pageTitle","contentGroupId","portalId"],o=`https://${(new Date).getTime()}-dummy.com`,a=(e,t)=>{let s,i=!1;try{s=new URL(e)}catch(t){n("[populateLinksWithTrackingParams]","Checking for relative URL",e);i=!0}if(i)try{s=new URL(`${o}${e.startsWith("/"),""}${e}`)}catch(t){n("Could not parse url for link",t);return e}Object.entries(t).forEach(([e,t])=>{r.includes(e)?null!=t&&s.searchParams.set(e,String(t)):n("Invalid analytics parameter passed",e)});const a=s.href;return i?a.replace(o,""):a};t.a=(e,t=[...document.querySelectorAll(".hs-web-interactive a")])=>{t.length&&t.forEach(t=>{const s=t.getAttribute("href");s&&!s.startsWith("javascript")&&t.setAttribute("href",a(s,e))})}},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));function i(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));function i(e,t=!1){if(t){const t=window.open(e,"_blank");t?t.focus():window.location.assign(e)}else window.location.assign(e)}},function(e,t){},function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));class i{constructor(){this.handleIntersection=e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;this.onElementAppear(t);this.observedElements.delete(t);this.observer.unobserve(t)}})};this.observer=new IntersectionObserver(this.handleIntersection,{threshold:.5});this.observedElements=new Map}onElementAppear(e){const t=this.observedElements.get(e);t&&t(e)}observe(e,t){if((()=>{const t=e.getBoundingClientRect(),s=window.innerHeight;return t.bottom>=0&&t.top<s})())t(e);else if(!this.observedElements.has(e)){this.observedElements.set(e,t);this.observer.observe(e)}}unobserve(e){if(this.observedElements.has(e)){this.observedElements.delete(e);this.observer.unobserve(e)}}}function n(){return new i}},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));s.d(t,"c",(function(){return n}));s.d(t,"b",(function(){return r}));function i(e,t){const s=[...e].filter(([e,s])=>t(s,e));return new Map(s)}function n(e,t){const s=[...e].sort(([e,s],[i,n])=>t(s,n));return new Map(s)}function r(e,t){const s=new Map(e);for(const[e,i]of t)s.set(e,i);return s}},function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));function i(e){const t=t=>{"Escape"===t.key&&e()};document.addEventListener("keydown",t);return()=>{document.removeEventListener("keydown",t)}}},function(e,t,s){"use strict";var i=s(24);s.d(t,"createTrigger",(function(){return i.a}));s(16)},function(e,t){},,,,function(e,t,s){"use strict";s.r(t);var i=s(0),n=s(3);const r={BANNER:"BANNER",MODAL:"MODAL",SLIDE_IN:"SLIDE_IN",EMBEDDED:"EMBEDDED"};var o=s(5);function a({contentId:e,portalId:t,env:s,hublet:i,useSameOrigin:n=!1}){const r="qa"===s?"qa":"",o="na1"===i?"":"-"+i,a=document.location.protocol;return n?`${window.location.origin}/hs-web-interactive-${t}-${e}`:`${a}//${t}.hs-sites${r}${o}.com/hs-web-interactive-${t}-${e}`}function c(e,t,s){const i={};t.contactPreviewEmail&&(i.email=t.contactPreviewEmail);const n=s.analytics&&s.analytics.hutk;n&&(i.utk=n);window.location.search.includes("hs_debug_interactive")&&(i.hs_debug_interactive="true");return Object(o.b)(e,i)}function l(e,t){if(null==e)return{};var s,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++){s=r[i];t.indexOf(s)>=0||(n[s]=e[s])}return n}function h(e,t){t.hutk&&e.searchParams.set("utk",""+t.hutk);t.hstc&&e.searchParams.set("__hstc",""+t.hstc);t.hssc&&e.searchParams.set("__hssc",""+t.hssc);t.referrer&&e.searchParams.set("referrer",""+t.referrer);t.pageId&&e.searchParams.set("contentId",t.pageId)}function d({contentIds:e,currentUrl:t,isPreview:s,portalId:i,env:n,hublet:r="na1",versionId:o,analytics:a,extraParams:c,path:l}){const d="qa"===n?"qa":"";let u="";u=window.location.search.includes("useLocalPublicService")?"https://local.hubspotqa.com/web-interactives/public/v1/"+l:"na1"===r?`https://cta-service-cms2.hubspot${d}.com/web-interactives/public/v1/${l}`:`https://cta-${r}.hubspot${d}.com/web-interactives/public/v1/${l}`;const m=new URL(u);s&&m.searchParams.set("isPreview","true");e&&e.length&&e.forEach(e=>m.searchParams.append("contentIds",""+e));i&&m.searchParams.set("portalId",""+i);t&&!s&&m.searchParams.set("currentUrl",t);o&&m.searchParams.set("versionId",""+o);a&&!s&&h(m,a);c&&Object.keys(c).forEach(e=>m.searchParams.set(e,""+c[e]));return m.href}const u="embed/combinedConfigs",m="embed/templateConfig";function p(e){let{previewScheduled:t,templatePath:s,isMobile:i}=e,n=l(e,["previewScheduled","templatePath","isMobile"]),r="";r=s?m:u;const o={};t&&(o.previewScheduled="true");s&&(o.templatePath=s);i&&(o.isMobile="true");return d(Object.assign({},n,{extraParams:o,path:r}))}const g={TOP:"TOP",BOTTOM:"BOTTOM",TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"},f=(e,t=1)=>{if(!e)return{r:null,g:null,b:null,a:t};if(3===(e=e.replace("#","")).length){const t=e.split("").reduce((e,t)=>e+t+t,"");e=t}return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:t}},v=(e,t=1)=>{const s=f(e,t);return`rgba(${s.r}, ${s.g}, ${s.b}, ${s.a})`};class C{constructor(){this.fetchConfigs=()=>{const e=this.store.state.configRequest;if(!e)return Promise.resolve(null);const t=p(e);return this.fetch(t)};this.handleFetchFailed=()=>{this.store.setState(e=>Object.assign({},e,{requestError:!0}))};this.handleFetchSucceded=({sortedAudienceConfigs:e,requestedConfigs:t})=>{const s=structuredClone(this.configs);e&&e.length&&e.forEach(e=>s.set(e.contentModelId,e));t&&t.length&&t.forEach(e=>{s.has(e.contentModelId)||s.set(e.contentModelId,e)});this.store.setState(e=>Object.assign({},e,{configs:s,isLoaded:!0}))};this.handleTemplateSucceded=e=>{this.store.setState(t=>Object.assign({},t,{templateConfig:e,isLoaded:!0}))};const e={configs:new Map,configRequest:null,requestError:!1,isLoaded:!1};this.store=new i.Store(e)}init(e){this.store.setState(t=>Object.assign({},t,{configRequest:e}));return this.fetchConfigs()}subscribe(e){return this.store.subscribe(e)}get configs(){return this.store.state.configs}get isLoaded(){return this.store.state.isLoaded}get sortedConfigsWithSpecificty(){return Object(i.sortMap)(this.configsWithAudience,(e,t)=>t.specificity-e.specificity)}get configsWithAudience(){return Object(i.filterMap)(this.configs,e=>e.specificity>0)}get overlayedConfigsWithNoAudience(){return Object(i.filterMap)(this.overlayedConfigs,e=>!e.specificity)}get overlayedConfigs(){return Object(i.filterMap)(this.configs,e=>e.containerType!==r.EMBEDDED)}get embeddedConfigs(){const e=Object(i.filterMap)(this.configs,e=>e.containerType===r.EMBEDDED);this.templateConfig&&this.templateConfig.containerType===r.EMBEDDED&&e.set(1,this.templateConfig);return e}get templateConfig(){return this.store.state.templateConfig}get previewConfig(){const[e]=this.store.state.configs.values();return e}fetch(e){return fetch(e).then(e=>{if(!e.ok){this.handleFetchFailed();return Promise.resolve(null)}return e.json().then(e=>{e.templatePath?this.handleTemplateSucceded(e):this.handleFetchSucceded(e);return e}).catch(this.handleFetchFailed)}).catch(this.handleFetchFailed)}fetchConfigsWithIds(e){const t=this.store.state.configRequest;if(!t)return;const s=p(Object.assign({},t,{contentIds:e}));this.fetch(s)}static getStylesFromContainerStyles(e){let t=e.width.value||5,s=e.height.value||5;"px"===e.width.units&&(t=Math.max(t,5));"px"===e.height.units&&(s=Math.max(s,5));return{width:`${t}${e.width.units}`,height:`${s}${e.height.units}`}}static getStylesForIframe(e){const t={},{border:s,borderRadius:i,boxShadow:n}=e;s&&(t.border=`${s.width.value}${s.width.units} ${s.style} ${v(s.color,s.opacity/100)}`);n&&n.css&&(t.boxShadow=n.css.split(":")[1]);i&&(t.borderRadius=`${i.value}${i.units}`);return t}static isFloatingButtonLike(e){return"isDismissable"in e&&(e.containerType===r.SLIDE_IN&&!e.isDismissable)}static isTopBannerLike(e){return e.containerType===r.BANNER&&e.containerStyles.position===g.TOP}}var T=new C;const b=()=>document.getElementById("hubspot-web-interactives-loader"),y=(e,t)=>{if(!t)return null;const s=t.getAttribute(e);return s||null},w=e=>{const t=y("data-hsjs-portal",e);return t?parseInt(t,10):null},E=e=>{const t=y("data-hsjs-env",e);return t||"prod"},S=e=>{const t=y("data-hsjs-hublet",e);return t||"na1"},I=e=>{const t=y("data-hsjs-local",e);return!!t&&"true"===t},O=e=>y("src",e),A=()=>{const e=b();return e?{portalId:w(e),env:E(e),hublet:S(e),isLocal:I(e),src:O(e)}:null},M=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),P=["hs_preview","preview_key"];class _{constructor(){this.portalId=0;this.env="";this.hublet="na1";this.isLocal=!1;this.isMobile=!1;this.isLiveHSPage=!1;this.pageId=null;this.isPreview=!1;this.isScreenshot=!1;this.isTemplate=!1;this.previewScheduled=!1;this.currentUrl=window.location.href;this.enableResponsiveStyles=!1;this.isPreviewPage=!1;this.gates=[]}init(){this._setEnvProps();this._setUrlProps()}static getPageId(){return window.hsVars&&window.hsVars.analytics_page_id?window.hsVars.analytics_page_id:window.hsVars&&window.hsVars.page_id?window.hsVars.page_id:null}_setEnvProps(){const e=A();this.portalId=e.portalId;this.hublet=e.hublet;this.env=e.env;this.isLocal=e.isLocal;this.isMobile=M();this.isPreviewPage=P.some(e=>window.location.search.includes(e));this.isLiveHSPage=Boolean(this.pageId)}isCosPreviewPage(){const e=window.location.toString();return/preview(-[^.]+)?\.hs-sites(qa)?(-[^.]+)?\.com/g.test(e)||/hubspotpreview(qa)?(-[^.]+)?/.test(e)||window.location.search.includes("hs_preview")||window.location.search.includes("preview_key")}isCos(){if(window.hsVars&&window.hsVars.portal_id)return!0;return[...document.getElementsByTagName("meta")].some(e=>"generator"===e.getAttribute("name")&&"HubSpot"===e.getAttribute("content"))}_setUrlProps(){const e=new URLSearchParams(window.location.search);if(e.has("templatePath")){this.templatePath=e.get("templatePath");this.isTemplate=!0}e.has("previewScheduled")&&(this.previewScheduled="true"===e.get("previewScheduled"));e.has("enableResponsiveStyles")&&(this.enableResponsiveStyles="true"===e.get("enableResponsiveStyles"));e.has("versionId")&&(this.versionId=parseInt(e.get("versionId"),10));if(e.has("screenshotBodyHeight")){this.screenshotBodyHeight=parseInt(e.get("screenshotBodyHeight"),10);this.isScreenshot=!0}if(e.has("previewInteractiveId")){this.previewId=parseInt(e.get("previewInteractiveId"),10);this.isPreview=!0}this.isPreview&&e.has("email")&&(this.contactPreviewEmail=e.get("email"))}setGates(e){this.gates=e}isUngatedFor(e){return this.gates.includes(e)}}var L=new _;class F{constructor(){this.markAsViewed=e=>{this.store.setState(t=>Object.assign({},t,{viewed:new Set([...t.viewed,e])}))};const e={viewed:new Set};this.store=new i.Store(e)}subscribe(e){this.store.subscribe(e)}hasBeenViewed(e){return this.store.state.viewed.has(e)}get viewed(){return this.store.state.viewed}}function R(){return new F}const N="hs-cta-trigger-button",H="hs-cta-embed",k="web-interactives-preview-wrapper";var D=()=>Array.from(document.getElementsByClassName(N));var B=()=>Array.from(document.getElementsByClassName(H));const V=()=>{try{return Array.from(document.querySelectorAll("a[href*='HS_DISPLAY_CALL_TO_ACTION'"))}catch(e){return[]}},x=e=>{const t=e.getAttribute("href");if(!t)return null;const s=/\(([^)]+)\)/.exec(t);if(!s)return null;const i=s[1];return i?JSON.parse(i.replace(/(['"])?([a-z0-9A-Z_]+)(['"])?:/g,'"$2": ').replaceAll("'",'"')).id:null};var j=e=>{const t=Array.from(e.classList).filter(e=>e.startsWith(N)&&e!==N||e.startsWith(H)&&e!==H).map(e=>e.split("-").pop());return Number(t)};function $(e){return Number(e.dataset.hubspotWrapperCtaId)}function G(){return Array.from(document.querySelectorAll(".hs-web-interactive-inline[data-hubspot-wrapper-cta-id]"))}const U=()=>{const e=new Map,t=new Map,s=new Map,i=new Set,n=new Set,r=new Set;D().forEach(t=>{const s=j(t);i.add(s);const n=e.get(s);n?e.set(s,[...n,t]):e.set(s,[t])});B().forEach(e=>{const s=j(e);n.add(s);const i=t.get(s);i?t.set(s,[...i,e]):t.set(s,[e])});V().forEach(t=>{const s=x(t);if(!s)return;i.add(s);const n=e.get(s);n?e.set(s,[...n,t]):e.set(s,[t])});G().forEach((e,t)=>{const i=$(e);if(!i)return;e.id=`hs-interactive-container-${i}-${t}`;r.add(i);const n=s.get(i);n?s.set(i,[...n,e]):s.set(i,[e])});const o=[...new Set([...i,...n,...r])];return{clickTriggerButtons:e,embedContainers:t,nonFramedCTAContainers:s,clickTriggerIds:i,embedIds:n,nonFramedIds:r,uniqueIds:o}},q=(e,t)=>{const s=document.createElement("div");s.innerHTML=t;return s.firstElementChild};let W={data:""},z=e=>{try{let t=e?e.querySelector("#_goober"):self._goober;return t||(t=(e||document.head).appendChild(document.createElement("style")),t.innerHTML=" ",t.id="_goober"),t.firstChild}catch(e){}return W},Y=/(?:([a-z0-9-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(})/gi,Q=/\/\*.*?\*\/|\s{2,}|\n/gm,X=(e,t,s)=>{let i="",n="",r="";for(let o in e){let a=e[o];if("object"==typeof a){let e=t+" "+o;/&/g.test(o)&&(e=o.replace(/&/g,t)),"@"==o[0]&&(e=t,"f"==o[1]&&(e=o)),/@k/.test(o)?n+=o+"{"+X(a,"","")+"}":n+=X(a,e,e==t?o:s||"")}else/^@i/.test(o)?i=o+" "+a+";":r+=X.p?X.p(o.replace(/[A-Z]/g,"-$&").toLowerCase(),a):o.replace(/[A-Z]/g,"-$&").toLowerCase()+":"+a+";"}if(r[0]){let e=t+"{"+r+"}";return s?n+s+"{"+e+"}":i+e+n}return i+n},K={},J=(e,t,s,i)=>{let n=e.toLowerCase?e:function e(t){let s="";for(let i in t)"object"==typeof val?s+=i+e(t[i]):s+=i+t[i];return s}(e),r=K[n]||(K[n]=".go"+n.split("").reduce((e,t)=>101*e+t.charCodeAt(0)>>>0,11));return((e,t,s)=>{t.data.indexOf(e)<0&&(t.data=s?e+t.data:t.data+e)})(K[r]||(K[r]=X(e[0]?(e=>{let t,s=[{}];for(;t=Y.exec(e.replace(Q,""));)t[4]&&s.shift(),t[3]?s.unshift(s[0][t[3]]=s[0][t[3]]||{}):t[4]||(s[0][t[1]]=t[2]);return s[0]})(e):e,s?"":r)),t,i),r.slice(1)},Z=(e,t,s)=>e.reduce((e,i,n)=>{let r=t[n];if(r&&r.call){let e=r(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;r=t?"."+t:e&&e.props?"":e}return e+i+(null==r?"":r)},"");function ee(e){let t=this||{},s=e.call?e(t.p):e;return J(s.map?Z(s,[].slice.call(arguments,1),t.p):s,z(t.target),t.g,t.o)}ee.bind({g:1});const te=ee(["position:fixed;display:block;width:100%;height:0px;margin:0px;padding:0px;overflow:visible;transform-style:preserve-3d;background:transparent;backface-visibility:hidden;pointer-events:none;left:0px;z-index:9998;"]),se=ee(["top:0px;z-index:9999;height:100%;width:100%;"]),ie=ee(["bottom:0px;"]),ne=ee(["position:fixed;z-index:9989;"]),re=ee(["left:0;bottom:0;"]),oe=ee(["right:0;bottom:0;"]),ae=ee(["left:0;top:0;"]),ce=ee(["right:0;top:0;"]),le=ee(["position:relative;overflow:hidden;display:none;"]),he=ee(["display:block;"]),de="hs-web-interactives-banner-style-element",ue="hs-web-interactives-top-banner-open",me="hs-web-interactives-top-anchor",pe="hs-web-interactives-top-push-anchor",ge="hs-web-interactives-bottom-anchor",fe="hs-web-interactives-floating-container",ve="hs-web-interactives-floating-top-left-anchor",Ce="hs-web-interactives-floating-top-right-anchor",Te="hs-web-interactives-floating-bottom-left-anchor",be="hs-web-interactives-floating-bottom-right-anchor",ye=e=>`\n  .${ue} .hs-is-fixed-element {\n    translate: 0px ${e}px!important;\n  }\n`,we=()=>`\n<div class="${te} ${se}" id="${me}"></div>\n<div class="${te} ${ie}" id="${ge}"></div>\n<div id="${fe}">\n  <div id="${ve}" class="${ne} ${ae}" >\n  </div>\n  <div id="${Ce}" class="${ne} ${ce}">\n  </div>\n  <div id="${Te}" class="${ne} ${re}">\n  </div>\n  <div id="${be}" class="${ne} ${oe}">\n  </div>\n</div>\n`;class Ee{constructor(){this.render();this.topPushAnchor=document.getElementById(pe);this.topAnchor=document.getElementById(me);this.bottomAnchor=document.getElementById(ge);this.floatingAnchors={[g.TOP_LEFT]:document.getElementById(ve),[g.TOP_RIGHT]:document.getElementById(Ce),[g.BOTTOM_LEFT]:document.getElementById(Te),[g.BOTTOM_RIGHT]:document.getElementById(be)};this.bottomRightFloatingButtonAnchor=this.floatingAnchors.BOTTOM_RIGHT}attachInteractiveOverlayToAnchor(e){e.containerType!==r.MODAL?e.isFloatingButtonLike?this.attachFloatingButton(e):e.containerType!==r.BANNER&&e.containerType!==r.SLIDE_IN||this.attachBanner(e):this.attachModal(e)}attachModal(e){this.topAnchor.appendChild(e.container)}attachBanner(e){e.position===g.BOTTOM||e.position===g.BOTTOM_LEFT||e.position===g.BOTTOM_RIGHT?this.bottomAnchor.appendChild(e.container):e.position!==g.TOP&&e.position!==g.TOP_RIGHT&&e.position!==g.TOP_LEFT||this.topAnchor.appendChild(e.container)}attachFloatingButton(e){const t=this.floatingAnchors[e.position];t&&t.appendChild(e.container)}addMarginForConversations(e){this.bottomRightFloatingButtonAnchor.style.marginBottom=e+"px"}removeMarginForConversations(){this.bottomRightFloatingButtonAnchor.style.marginBottom=""}insertPushBanner(){const e=document.createElement("div");e.id=pe;e.classList.add(le);document.body.prepend(e)}showPushBanner(e){this.topPushAnchor.style.height=e+"px";this.topPushAnchor.classList.add(he);document.body.classList.add(ue);const t=document.createElement("style");t.id=de;t.innerHTML=ye(e);document.head.appendChild(t)}hidePushBanner(){this.topPushAnchor.style.height="";this.topPushAnchor.classList.remove(he);document.body.classList.remove(ue);const e=document.getElementById(de);e&&document.head.removeChild(e)}render(){this.insertPushBanner();document.body.insertAdjacentHTML("beforeend",we())}}const Se=ee(["position:absolute;pointer-events:none;width:101vw;height:101vh;background:rgba(0,0,0,0.7);opacity:0;z-index:-1;"]),Ie=ee(["z-index:99998;opacity:0.5;visibility:visible;pointer-events:all;cursor:pointer;"]);class Oe{constructor({parent:e,handleClick:t=(()=>{})}){this.overlay=document.createElement("div");this.overlay.id="hs-interactives-modal-overlay";this.overlay.classList.add(Se);this.handleClick=t;this.render(e);this.listenForClick()}listenForClick(){this.overlay.addEventListener("click",this.handleClick)}show(){this.overlay.classList.add(Ie)}hide(){this.overlay.classList.remove(Ie)}render(e){e.appendChild(this.overlay)}}const Ae={modalPosition:null,bannerPositions:{TOP_LEFT:null,TOP_RIGHT:null,BOTTOM_LEFT:null,BOTTOM_RIGHT:null,BOTTOM:null,TOP:null},floatingPositions:{TOP_LEFT:null,TOP_RIGHT:null,BOTTOM_LEFT:null,BOTTOM_RIGHT:null}},Me=[g.TOP,g.TOP_LEFT,g.TOP_RIGHT],Pe=[g.BOTTOM,g.BOTTOM_LEFT,g.BOTTOM_RIGHT];class _e{constructor({isMobile:e=!1}){this.isMobile=!1;this.store=new i.Store(Ae);this.isMobile=e}setPosistionFromConfig(e){const{contentModelId:t,containerType:s,containerStyles:{position:i}}=e,n=C.isFloatingButtonLike(e);s===r.MODAL?this.setModalPosition(t):s!==r.BANNER&&!r.SLIDE_IN||n?n&&this.setFloatingPosition(i,t):this.setBannerPosition(i,t)}get modalPosition(){return this.store.state.modalPosition}get bannerPositions(){return this.store.state.bannerPositions}get floatingPositions(){return this.store.state.floatingPositions}canBeInsertedIntoPosition(e){return this.isMobile?this.canBeInsertedIntoPositionMobile(e):this.canBeInsertedIntoPositionDesktop(e)}canBeInsertedIntoPositionMobile(e){const t=C.isFloatingButtonLike(e);return e.containerType===r.MODAL?!this.modalPosition:e.containerType===r.BANNER||e.containerType===r.SLIDE_IN&&!t?Object.keys(this.bannerPositions).reduce((e,t)=>e&&!this.bannerPositions[t],!0):!!t&&Object.keys(this.floatingPositions).reduce((e,t)=>e&&!this.floatingPositions[t],!0)}canBeInsertedIntoPositionDesktop(e){const t=C.isFloatingButtonLike(e);return e.containerType===r.MODAL?!this.modalPosition:e.containerType===r.BANNER||e.containerType===r.SLIDE_IN&&!t?Pe.includes(e.containerStyles.position)?!this.bannerPositions[g.BOTTOM]&&!this.bannerPositions[g.BOTTOM_LEFT]&&!this.bannerPositions[g.BOTTOM_RIGHT]:!!Me.includes(e.containerStyles.position)&&(!this.bannerPositions[g.TOP]&&!this.bannerPositions[g.TOP_LEFT]&&!this.bannerPositions[g.TOP_RIGHT]):!!t&&!this.floatingPositions[e.containerStyles.position]}setModalPosition(e){this.store.setState(t=>Object.assign({},t,{modalPosition:e}))}setBannerPosition(e,t){this.store.setState(s=>{const i=s.bannerPositions;return Object.assign({},s,{bannerPositions:Object.assign({},i,{[e]:t})})})}setFloatingPosition(e,t){this.store.setState(s=>{const i=s.floatingPositions;return Object.assign({},s,{floatingPositions:Object.assign({},i,{[e]:t})})})}}function Le(e){return new _e({isMobile:e})}const Fe=6e4,Re=1440*Fe,Ne=7*Re,He=4*Ne,ke={REPEAT_ONCE:"REPEAT_ONCE",REPEAT_FOREVER:"REPEAT_FOREVER",ONCE_OFF:"ONCE_OFF"},De={DAYS:"DAYS",MONTHS:"MONTHS",WEEKS:"WEEKS",MINUTES:"MINUTES"},Be=Object.freeze({DAYS:Re,MONTHS:He,WEEKS:Ne,MINUTES:Fe}),Ve="WI_IGNORED",xe="WI_FREQUENCY",je={frequency:ke.REPEAT_ONCE,backoff:{backoffTimeDuration:2,backoffTimeUnit:De.WEEKS}},$e=e=>{try{if(!localStorage.getItem(`${xe}_${e}`)){const t=localStorage.getItem(`${Ve}_${e}`);if(!t)return!1;return parseInt(t,10)>Date.now()-2*Be.WEEKS}const t=JSON.parse(localStorage.getItem(`${xe}_${e}`));switch(t.frequency){case ke.ONCE_OFF:return!0;case ke.REPEAT_FOREVER:return!1;case ke.REPEAT_ONCE:{const{timeSaved:e,backoffTimeDuration:s,backoffTimeUnit:i}=t,n=s*Be[i];return e>Date.now()-n}default:return!1}}catch(e){return!1}},Ge=(e,t)=>{let s=t;s&&s.frequency||(s=je);const{frequency:i,backoff:n}=s;try{let t={frequency:i};n&&(t=Object.assign({},t,{},n,{timeSaved:Date.now()}));localStorage.setItem(`${xe}_${e}`,JSON.stringify(t))}catch(e){return}},Ue=(e,{frequency:t,backoff:s})=>{try{if(!t)return;const i=`${xe}_${e}`,n=JSON.parse(localStorage.getItem(i));if(!n)return;if(n.frequency!==t){localStorage.removeItem(i);return}if(!s||!n.backoffTimeDuration)return;s.backoffTimeDuration===n.backoffTimeDuration&&s.backoffTimeUnit===n.backoffTimeUnit||localStorage.removeItem(i)}catch(e){return}},qe=ee(["display:block !important;position:static !important;box-sizing:border-box !important;background:transparent !important;border:none;min-height:0px !important;max-height:none !important;margin:0px;padding:0px !important;height:100% !important;width:1px !important;max-width:100% !important;min-width:100% !important;"]);function We(e,t={}){Object(n.a)("Setting style on element",t,e);for(const s in t)Object.hasOwnProperty.call(t,s)&&(e.style[s]=t[s])}const ze="hs-cta-embed__loaded",Ye=()=>{};class Qe{constructor({src:e,contentId:t,containerStyle:s,configStyle:n,iframeStyle:r,containerType:o,isFloatingButtonLike:a,isTopBanner:c}){this.onClose=Ye;this.setDeferredPromise();this.container=document.createElement("div");this.contentId=t;this.container.id="hs-overlay-cta-"+t;this.frameComponent=Object(i.createFrameComponent)({container:this.container,id:t,iframeSrc:e,onFrameReady:this.resolveFrameload,resizeHeight:n.scaleHeightToFitContent||Boolean(n.isSingleModuleOnly),useResponsiveStyling:n.useResponsiveStyling});this.frameComponent.iframe.setAttribute("data-test-id","interactive-frame");this.frameComponent.iframe.classList.add(qe);this.containerStyle=s;this.iframeStyle=r;this.configStyle=n;this.containerType=o;this.position=n.position||null;this.isFloatingButtonLike=a;this.isTopBanner=c;this.applyStyleElements();this.render()}applyStyleElements(){this.frameComponent.setStyle(this.iframeStyle);We(this.container,this.containerStyle)}setDeferredPromise(){this.frameLoadPromise=new Promise(e=>{this.resolveFrameload=e})}open(){return this.frameLoadPromise.then(()=>{this.frameComponent.setStyle({visibility:""});this.container.classList.add(ze);this.internalOpen()}).catch(()=>{})}close(){}render(){}registerCloseHandler(e){this.frameComponent.iframeCommunicator.registerHandlers({[i.MessageTypes.CLOSE_INTERACTIVE]:e})}internalOpen(){}}const Xe=(...e)=>{Object(n.a)("[overlays/Modal]",...e)},Ke=ee(["z-index:99999;visibility:hidden;position:absolute;inset:50vh auto auto 50%;transform:translate(-50%,-50%);left:50%;top:50%;opacity:0;pointer-events:none;max-height:95%;max-width:95%;"]),Je=ee(["pointer-events:auto !important;visibility:visible;opacity:1;transition:opacity 1s ease-in;"]);class Ze extends Qe{internalOpen(){this.container.classList.add(Je);this.focusElement()}focusElement(){try{this.frameComponent.iframe.focus()}catch(e){Xe("Frame not defined",e)}}close(){this.container.classList.remove(Je)}render(){this.frameComponent.iframe.setAttribute("role","dialog");this.container.classList.add(Ke)}}const et=ee(["pointer-events:auto !important;visibility:visible !important;max-height:95vh !important;transition:max-height 1s ease-in;"]),tt=ee(["z-index:9999;width:100%;max-height:0px;position:fixed;max-height:95%;visibility:hidden;"]),st=ee(["z-index:9999;width:100%;max-height:0px;position:fixed;max-height:95%;visibility:hidden;bottom:0px;"]),it={[g.TOP]:tt,[g.BOTTOM]:st};class nt extends Qe{internalOpen(){this.container.classList.add(et)}close(){this.container.classList.remove(et)}addPositionClass(){const{position:e}=this.configStyle;this.container.classList.add(it[e])}render(){this.addPositionClass();this.container.classList.add(tt)}}const rt=ee(["visibility:hidden;"]),ot=ee(["visibility:visible !important;"]);class at extends Qe{internalOpen(){this.container.classList.add(ot)}close(){this.container.classList.remove(ot)}render(){this.container.classList.add(rt)}}const ct=ee(["pointer-events:auto !important;visibility:visible !important;max-height:95vh !important;transform:none !important;"]),lt=ee(["z-index:9999;width:100%;max-height:0px;position:fixed;max-height:95%;visibility:hidden;transition:transform 0.5s cubic-bezier(0.31,-0.2,0.04,1.47);"]),ht=ee(["z-index:9999;position:fixed;left:10px;top:10px;max-height:95vh !important;max-width:95%;visibility:hidden;"]),dt=ee(["z-index:9999;position:fixed;right:10px;top:10px;max-height:95vh !important;max-width:95%;visibility:hidden;"]),ut=ee(["z-index:9999;position:fixed;left:10px;bottom:10px;max-height:95vh !important;max-width:95%;visibility:hidden;"]),mt=ee(["z-index:9999;position:fixed;right:10px;bottom:10px;max-height:95vh !important;max-width:95%;visibility:hidden;"]),pt={[g.BOTTOM_RIGHT]:mt,[g.BOTTOM_LEFT]:ut,[g.TOP_RIGHT]:dt,[g.TOP_LEFT]:ht};class gt extends Qe{internalOpen(){this.container.classList.add(ct)}close(){this.container.classList.remove(ct)}addPositionClass(){const{position:e}=this.configStyle;this.container.classList.add(pt[e])}addOffset(){const e=this.containerStyle.width;if(!e)return;switch(this.configStyle.position){case g.BOTTOM_LEFT:case g.TOP_LEFT:this.container.style.transform=`translateX(-${e})`;return;case g.BOTTOM_RIGHT:case g.TOP_RIGHT:this.container.style.transform=`translateX(calc(100% + ${e}))`;return}}render(){this.addPositionClass();this.addOffset();this.container.classList.add(lt)}}function ft(e,t){const s=C.isFloatingButtonLike(e),i=C.isTopBannerLike(e),n={src:t,configStyle:e.containerStyles,contentId:e.contentModelId,containerType:e.containerType,containerStyle:C.getStylesFromContainerStyles(e.containerStyles),iframeStyle:C.getStylesForIframe(e.containerStyles),isFloatingButtonLike:s,isTopBanner:i};if(s)return new at(n);switch(e.containerType){case r.MODAL:return new Ze(n);case r.BANNER:return new nt(n);case r.SLIDE_IN:return new gt(n);default:return null}}function vt(e){if("buttons"in(e=e||window.event))return e.buttons<2;return(e.which||e.button)<2}const Ct=(...e)=>{Object(n.a)("[ClickTrigger",...e)},Tt=ee(["cursor:pointer;"]);class bt{constructor(e,t){this.button=e;this.onClick=t;this.init()}init(){Ct("Setting up click trigger");this.button.removeAttribute("href");this.button.removeAttribute("target");this.button.classList.add(Tt);this.button.removeAttribute("href");this.button.removeAttribute("target");this.button.addEventListener("mouseup",e=>{Ct("Mouse up on click trigger",e);vt(e)&&this.onClick()});this.button.addEventListener("keypress",e=>{if("Enter"===e.key){Ct("Enter on click trigger",e);this.onClick()}})}}var yt=s(15);function wt(e,t){const s=new ResizeObserver(s=>{for(const i of s)i.target===e&&i.contentRect&&t(i.contentRect.height,i.contentRect.height)});s.observe(e);return()=>s.disconnect()}const Et="hubspot-messages-iframe-container",St=()=>{},It=220,Ot=400;class At{constructor(e){this.disconnectResizeObserver=St;this.conversationsFrameContainer=null;this.handleConversationsReady=()=>{this.pollForConversationsRendered().then(()=>{this.conversationsFrameContainer=document.getElementById(Et);this.addConversationsStyleSheet();this.listenForConversationsHeightChange();this.setFloatingButtonOffset()}).catch(()=>{})};this.overlayContainer=e;this.listenForConversationsReady()}listenForConversationsReady(){window.HubSpotConversations?this.handleConversationsReady():window.hsConversationsOnReady&&window.hsConversationsOnReady.length?window.hsConversationsOnReady=[...window.hsConversationsOnReady,this.handleConversationsReady]:window.hsConversationsOnReady=[this.handleConversationsReady]}listenForConversationsHeightChange(){if(!this.conversationsFrameContainer)return;const e=wt(this.conversationsFrameContainer,e=>{this.conversationsFrameContainer&&e<It&&this.setFloatingButtonOffset()});this.disconnectResizeObserver=e}pollForConversationsRendered(){return new Promise(e=>{const t=setInterval(()=>{if(document.getElementById(Et)){e();clearInterval(t)}},Ot)})}setFloatingButtonOffset(){if(!this.overlayContainer||!this.conversationsFrameContainer)return;const e=this.conversationsFrameContainer.clientHeight;this.overlayContainer.addMarginForConversations(e)}addConversationsStyleSheet(){const e=document.createElement("style");e.innerHTML="#hubspot-messages-iframe-container { z-index: 9990!important; }";document.head.appendChild(e)}}function Mt(e){return new At(e)}const Pt=-1;class _t{constructor({configModel:e,environmentModel:t,analyticsModel:s,scheduledCTAsModel:n,handleView:o,scheduleCTA:a}){this.triggerMap=new Map;this.shownModal=null;this.clickTriggerComponentMap=new Map;this.interactiveComponentMap=new Map;this.conversationsController=null;this.listenForKeypress=()=>{Object(i.listenForEscPress)(()=>{this.shownModal&&this.closeOverlay(this.shownModal)})};this.handleTrigger=e=>{if(!$e(e)){this.openOverlay(e);for(const[t,s]of this.triggerMap)t===e&&s.forEach(e=>e.remove());this.triggerMap.delete(e)}};this.handleTriggerEmbed=({triggerCTA:e})=>{this.interactiveComponentMap.has(e)?this.handleClickOpen(e):this.scheduledCTAsModel.scheduledCTAs.has(e)||this.scheduleCTA(e)};this.handleClickOpen=e=>{this.openOverlay(e)};this.handleOverlayClick=()=>{if(!Number.isInteger(this.shownModal))return;const e=this.configModel.configs.get(this.shownModal);e&&e.containerStyles.closeOnOverlayClick&&this.closeOverlay(this.shownModal)};this.closeOverlay=e=>{let t;t=this.configModel.templateConfig?this.interactiveComponentMap.get(Pt):this.interactiveComponentMap.get(e);if(t){t.isTopBanner&&this.overlayedInteractivesContainer.hidePushBanner();t.containerType===r.MODAL&&this.overlay.hide();t.close();e===this.shownModal&&(this.shownModal=null);document.activeElement instanceof HTMLElement&&document.activeElement.blur();this.messageCTAClosed(e)}};this.configModel=e;this.environmentModel=t;this.analyticsModel=s;this.scheduledCTAsModel=n;this.overlayedInteractivesContainer=null;this.overlay=null;this.handleView=o;this.scheduleCTA=a;this.listenToConfigUpdates();this.listenForOpenCTAMessage();this.listenForKeypress();this.registerMessageHandlers()}init({clickTriggerButtons:e}){this.posistionsOccupied=Le(this.environmentModel.isMobile);this.overlayedInteractivesContainer=new Ee;this.overlay=new Oe({parent:this.overlayedInteractivesContainer.topAnchor,handleClick:this.handleOverlayClick});this.conversationsController=Mt(this.overlayedInteractivesContainer);this.createClickTriggerComponents(e)}registerMessageHandlers(){i.GlobalIframeCommunication.registerHandlers({[i.MessageTypes.TRIGGER_CTA]:this.handleTriggerEmbed})}createClickTriggerComponents(e){for(const[t,s]of e)s.forEach(e=>{const s=new bt(e,()=>this.handleClickOpen(t)),i=this.clickTriggerComponentMap.get(t)||[];this.clickTriggerComponentMap.set(t,[...i,s])})}createOverlayInteractivesWithAudience(){for(const[e,t]of this.configModel.sortedConfigsWithSpecificty){if(!this.shouldCreateInteractiveOverlay(t))continue;if(!this.createOverlayComponentAndSetOnMap(t))continue;this.posistionsOccupied.setPosistionFromConfig(t);const e=Object(yt.createTrigger)(t.triggers,()=>this.handleTrigger(t.contentModelId));if(!e.length)return;this.triggerMap.set(t.contentModelId,e)}}createOverlayInteractivesWithNoAudience(){for(const[e,t]of this.configModel.overlayedConfigsWithNoAudience){if(this.interactiveComponentMap.has(e))continue;if(!this.createOverlayComponentAndSetOnMap(t))return;if(this.scheduledCTAsModel.scheduledCTAs.has(e)){this.openOverlay(e);this.scheduledCTAsModel.removeCTA(e)}}}createTemplateOverlayInteractive(){this.createOverlayComponentAndSetOnMap(this.configModel.templateConfig)}createPreviewOverlayInteractive(){this.createOverlayComponentAndSetOnMap(this.configModel.previewConfig)}createOverlayComponentAndSetOnMap(e){const t=ft(e,c(e.iframeSrc,this.environmentModel,this.analyticsModel));if(!t)return null;let s;s="contentModelId"in e?e.contentModelId:Pt;this.interactiveComponentMap.set(s,t);this.overlayedInteractivesContainer.attachInteractiveOverlayToAnchor(t);t.registerCloseHandler(()=>this.closeOverlay(e.contentModelId));return t}shouldCreateInteractiveOverlay(e){return!($e(e.contentModelId)&&!this.clickTriggerComponentMap.has(e.contentModelId))&&!!this.posistionsOccupied.canBeInsertedIntoPosition(e)}listenToConfigUpdates(){this.configModel.store.subscribe((e,t)=>{if(this.environmentModel.isPreview&&e.configs.size>0){this.createPreviewOverlayInteractive();requestAnimationFrame(()=>{this.configModel.previewConfig&&this.openOverlay(this.configModel.previewConfig.contentModelId)})}else if(0===t.configs.size&&e.configs.size>0){this.createOverlayInteractivesWithAudience();this.createOverlayInteractivesWithNoAudience()}else if(e.templateConfig){this.createTemplateOverlayInteractive();requestAnimationFrame(()=>{this.openOverlay(Pt)})}else e.configs.size>t.configs.size&&this.createOverlayInteractivesWithNoAudience()})}listenForOpenCTAMessage(){window.addEventListener("message",e=>{e&&e.data&&e.data.type===i.MessageTypes.DISPLAY_CALL_TO_ACTION&&this.openOverlay(e.data.id)})}openOverlay(e){const t=this.interactiveComponentMap.get(e);if(t){t.isTopBanner&&this.overlayedInteractivesContainer.showPushBanner(t.container.clientHeight);t.open().then(()=>{t.isTopBanner&&this.overlayedInteractivesContainer.showPushBanner(t.container.clientHeight);if(t.containerType===r.MODAL){this.shownModal=e;this.overlay.show()}this.handleView(e)}).catch(()=>{})}}messageCTAClosed(e){i.GlobalIframeCommunication.broadcast(e,{type:i.MessageTypes.HAS_CLOSED,payload:{}})}}const Lt="hs-cta-embed__loaded";class Ft{constructor({contentId:e,embedContainer:t,iframeSrc:s,useResponsiveStyling:n}){this.listenForLoad();this.frameComponent=Object(i.createFrameComponent)({id:e,container:t,iframeSrc:s,resizeHeight:!0,onFrameReady:this.resolveFrameload,useResponsiveStyling:n});this.frameComponent.iframe.setAttribute("data-test-id","interactive-frame");this.frameComponent.iframe.classList.add(qe);this.contentId=e;this.embedContainer=t}setStyles(e,t,s){this.frameComponent.setShouldResize(s);Object(i.setStyleOnElement)(this.embedContainer,e);this.frameComponent.setStyle(Object.assign({},t));this.resolveConfig&&this.resolveConfig()}showFrame(){this.frameComponent.setStyle({visibility:""})}listenForLoad(){const e=new Promise(e=>{this.resolveFrameload=e}),t=new Promise(e=>{this.resolveConfig=e});Promise.all([e,t]).then(()=>{Array.from(this.embedContainer.children).forEach(e=>{e!==this.frameComponent.iframe&&this.embedContainer.removeChild(e)});this.embedContainer.classList.add(Lt);this.showFrame()}).catch(()=>{})}}class Rt{constructor({environmentModel:e,configStore:t,handleView:s,analyticsModel:n,scheduledCTAsModel:r}){this.embeddedInteractives=new Map;this.elementObserver=Object(i.createElementObserver)();this.styledComponentSet=new Set;this.flushScheduledCTAs=()=>{for(const e of this.scheduledCTAsModel.scheduledCTAs){const t=this.configStore.embeddedConfigs.get(e);if(!t||t.isHTMLVersionOnly)continue;if(!this.scheduledCTAsModel.elementsForEmbeddedCTAs.has(e))continue;this.scheduledCTAsModel.elementsForEmbeddedCTAs.get(e).forEach(t=>{this.createView(e,t)});this.handleView(e);this.scheduledCTAsModel.removeCTA(e)}};this.environmentModel=e;this.configStore=t;this.scheduledCTAsModel=r;this.handleView=s;this.analyticsModel=n}init({embedContainers:e}){this.embedContainers=e;this.environmentModel.isPreview||this.environmentModel.isTemplate||this.createViews();this.listenForConfigs();this.listenForElementViews();this.listenForScheduledCTAs()}listenForScheduledCTAs(){this.scheduledCTAsModel.subscribe(this.flushScheduledCTAs)}listenForElementViews(){if(this.embedContainers)for(const[e,t]of this.embedContainers)for(const s of t)this.elementObserver.observe(s,()=>this.handleView(e))}listenForConfigs(){this.configStore.configs.size>0?this.setStylesOnContainer():this.configStore.subscribe(()=>{this.scheduledCTAsModel.scheduledCTAs.size>0&&this.flushScheduledCTAs();if(this.configStore.embeddedConfigs.size>0){(this.environmentModel.isPreview||this.environmentModel.isTemplate)&&this.configStore.embeddedConfigs.size>0&&this.createViews();this.setStylesOnContainer()}})}setStylesOnContainer(){for(const[e,t]of this.configStore.embeddedConfigs){const s=this.embeddedInteractives.get(e);s&&s.length&&s.forEach(e=>{if(!this.styledComponentSet.has(e)){this.styledComponentSet.add(e);e.setStyles(C.getStylesFromContainerStyles(t.containerStyles),C.getStylesForIframe(t.containerStyles),t.containerStyles.scaleHeightToFitContent||Boolean(t.containerStyles.isSingleModuleOnly))}})}}createViews(){for(const[e,t]of this.embedContainers){let s="";const i=this.configStore.embeddedConfigs.get(e);s=i?i.iframeSrc:a({contentId:e,portalId:this.environmentModel.portalId,env:this.environmentModel.env,hublet:this.environmentModel.hublet,useSameOrigin:this.environmentModel.isLiveHSPage});s=c(s,this.environmentModel,this.analyticsModel);const n=[];t.forEach(t=>{const r=new Ft({contentId:e,embedContainer:t,iframeSrc:s,useResponsiveStyling:!!i&&i.containerStyles.useResponsiveStyling});n.push(r)});this.embeddedInteractives.set(e,n)}}createView(e,t){const s=this.configStore.embeddedConfigs.get(e);if(!s)return;const i=c(s.iframeSrc,this.environmentModel,this.analyticsModel),n=new Ft({contentId:e,embedContainer:t,iframeSrc:i,useResponsiveStyling:s.containerStyles.useResponsiveStyling}),r=this.embeddedInteractives.get(e)||[];this.embeddedInteractives.set(e,[...r,n]);this.setStylesOnContainer()}}const Nt="POP_OVER",Ht="hsCta";class kt{constructor({configStore:e,environmentModel:t}){this.ignoreCta=({id:e})=>{if(this.environmentModel.isPreview)return;const t=this.configStore.configs.get(e);t&&t.containerType!==r.EMBEDDED&&Ge(e,t.displayFrequency)};this.registerPopupPolice=({id:e})=>{const t=this.configStore.configs.get(e);t&&t.containerType===r.MODAL&&window._registerAvailablePopup&&window._registerAvailablePopup(Ht,Nt)};this.configStore=e;this.environmentModel=t;this.registerHandlers();this.listenForConfigs()}registerHandlers(){i.GlobalIframeCommunication.registerHandlers({[i.MessageTypes.NAVIGATE_PAGE]:this.ignoreCta,[i.MessageTypes.CLOSE_INTERACTIVE]:this.ignoreCta,[i.MessageTypes.STARTED]:this.registerPopupPolice})}listenForConfigs(){this.configStore.subscribe((e,t)=>{if(e.configs.size!==t.configs.size)for(const[t,s]of e.configs)s.displayFrequency&&Ue(t,s.displayFrequency)})}}function Dt(e){return new kt(e)}const Bt=ee(["display:flex;justify-content:center;align-items:center;"]),Vt="interactive-ready";class xt{constructor({environmentModel:e}){this.environmentModel=e}init(){if(this.environmentModel.isPreview||this.environmentModel.isScreenshot||this.environmentModel.templatePath){this.bodyWrapper=document.getElementsByClassName(k)[0];if(this.bodyWrapper){this.setupEmbedContainer();this.setHeightForPreview();this.listenForInteractiveLoaded()}}}setupEmbedContainer(){this.bodyWrapper.classList.add(Bt);const e=this.environmentModel.previewId||1;this.bodyWrapper.innerHTML=`\n      <div class="${H} ${H}-${e}">\n    `}setHeightForPreview(){this.bodyWrapper.style.height="100vh"}listenForInteractiveLoaded(){i.GlobalIframeCommunication.registerHandlers({[i.MessageTypes.STARTED]:()=>document.body.classList.add(Vt)})}}function jt({environmentModel:e}){return new xt({environmentModel:e})}const $t=e=>{let t=1,s=0;for(;t>0&&s!==e.length;){const i=e[s];"{"===i?t++:"}"===i&&t--;s++;if(s>e.length)return e.length}return s},Gt=e=>window.matchMedia(e).matches,Ut=e=>e.includes("width")?"@media (min-width: 0px)":e,qt=(e,t=Gt)=>{let s="",i=e,n=i.indexOf("@media");if(-1===n)return!1;for(;n>0;){s=`${s}${i.substring(0,n-1)}`;i=i.substring(n);const e=i.indexOf("{"),r=i.substring(0,e);i=i.substring(e+1);const o=$t(i);if(t(r.replace("@media ",""))){const e=i.substring(0,o-1);s=`${s}${Ut(r)} { ${e} }`}i=i.substring(o+1);n=i.indexOf("@media")}return`${s}${i}`.trim()},Wt=e=>Object.keys(e).reduce((t,s)=>{const i=qt(e[s]);return i?Object.assign({},t,{[s]:i}):t},{});var zt=(e,t)=>{let s=0;return(...i)=>{s&&clearTimeout(s);s=setTimeout(()=>{e(...i);s=0},t)}};const Yt=(...e)=>{Object(n.a)("[ResponsiveController]",...e)};class Qt{constructor(){this.initialStylesheets={}}init(){this.listenForStylesheetsHtml();const e=zt(()=>Object.keys(this.initialStylesheets).forEach(e=>this.handleProcessStylesheets(Number(e))),100);window.addEventListener("resize",()=>{Yt("Resizing, reprocessing stylesheets");e()})}listenForStylesheetsHtml(){i.GlobalIframeCommunication.registerHandlers({[i.MessageTypes.SEND_STYLESHEETS]:e=>{this.initialStylesheets[e.id]=e.stylesheetsHtml;this.handleProcessStylesheets(e.id)}})}handleProcessStylesheets(e){if(!this.initialStylesheets[e])return;const t=Wt(this.initialStylesheets[e]);i.GlobalIframeCommunication.broadcast(e||1,{type:i.MessageTypes.RECEIVE_FILTERED_STYLESHEETS,payload:{stylesheets:t}})}}function Xt(){return new Qt}function Kt(e,t){return"https://perf{region}.hsforms{env}.com/embed/v3/counters.gif".replace("{region}","-"+e).replace("{env}","qa"===t?"qa":"")}const Jt={CONFIG_LOADED_SUCCESS:"config-loaded-success",CONFIG_LOADED_FAILURE:"config-loaded-failure",INTERACTIVE_SHOWN:"interactive-shown",INTERACTIVE_CLOSED:"interactive-closed",INTERACTIVE_NAVIGATED:"interactive-navigated",INLINE_INTERACTIVE_RENDER_SUCCESS:"inline-interactive-render-success",INLINE_INTERACTIVE_RENDER_FAIL:"inline-interactive-render-fail"};class Zt{constructor({environmentModel:e,configStore:t}){this.perfUrl="";this.environmentModel=e;this.configStore=t;this.registerHandlers();this.listenToConfigStore()}init(){this.perfUrl=Kt(this.environmentModel.hublet,this.environmentModel.env)}trackRender(e){this.trackMetric(e?Jt.INLINE_INTERACTIVE_RENDER_SUCCESS:Jt.INLINE_INTERACTIVE_RENDER_FAIL)}registerHandlers(){i.GlobalIframeCommunication.registerHandlers({[i.MessageTypes.STARTED]:()=>this.trackMetric(Jt.INTERACTIVE_SHOWN),[i.MessageTypes.CLOSE_INTERACTIVE]:()=>this.trackMetric(Jt.INTERACTIVE_CLOSED),[i.MessageTypes.NAVIGATE_PAGE]:()=>this.trackMetric(Jt.INTERACTIVE_NAVIGATED)})}listenToConfigStore(){this.configStore.subscribe(e=>{e.requestError?this.trackMetric(Jt.CONFIG_LOADED_FAILURE):e.isLoaded&&this.trackMetric(Jt.CONFIG_LOADED_SUCCESS)})}trackMetric(e){if(!this.perfUrl.length)return;const t=`${this.perfUrl}?key=${e}&value=1`;(new Image).src=t}}function es(e){return new Zt(e)}const ts=(...e)=>{Object(n.a)("[CTAAnalyticsController]",...e)};function ss({env:e,hublet:t}){const s="prod"===e?"":e;let i="";i="na1"!==t&&t?`https://cta-${t}.hubspot${s}.com/web-interactives/public/v1/track`:`https://cta-service-cms2.hubspot${s}.com/web-interactives/public/v1/track`;return i}class is{constructor({analyticsStore:e,configsStore:t,environmentModel:s,ctaViewedStore:n}){this.timingMap=new Map;this.viewQueue=Object(i.createQueue)();this.hasViewed=new Set;this.baseUrl="";this.trackView=({id:e})=>{if(this.configStore.isLoaded){this.trackWithImage(e,"view");this.timingMap.set(e,Date.now())}else this.viewQueue.enqueue(e)};this.trackClose=({id:e})=>{this.trackWithImage(e,"close")};this.trackNavigation=({id:e})=>{if(!this.configStore.configs.get(e))return;const t=new URL(this.attachTrackingParamsToUrl(this.baseUrl+"/click",e));t.searchParams.set("skip","true");"sendBeacon"in navigator?navigator.sendBeacon(t):fetch(t,{method:"POST",keepalive:!0})};this.analyticsStore=e;this.configStore=t;this.environmentModel=s;this.ctaViewedStore=n}init(){this.baseUrl=ss({env:this.environmentModel.env,hublet:this.environmentModel.hublet});if(!this.environmentModel.isPreview&&!this.environmentModel.isTemplate){this.registerHandlers();this.listenForStoreLoad();this.listenForViewChange();this.handleViews()}}registerHandlers(){i.GlobalIframeCommunication.registerHandlers({[i.MessageTypes.CLOSE_INTERACTIVE]:this.trackClose,[i.MessageTypes.NAVIGATE_PAGE]:this.trackNavigation})}listenForStoreLoad(){this.configStore.subscribe((e,t)=>{e.isLoaded&&!t.isLoaded&&this.flushViewQueue()})}listenForViewChange(){this.ctaViewedStore.subscribe(()=>{this.handleViews()})}handleViews(){for(const e of this.ctaViewedStore.viewed)if(!this.hasViewed.has(e)){this.trackView({id:e});this.hasViewed.add(e)}}flushViewQueue(){do{const e=this.viewQueue.dequeue();e&&this.trackView({id:e})}while(this.viewQueue.peek())}trackWithImage(e,t){ts("Tracking:",t,e);let s=`${this.baseUrl}/${t}`;s=this.attachTrackingParamsToUrl(s,e);(new Image).src=s}attachTrackingParamsToUrl(e,t){const s=new URL(e),i=this.configStore.configs.get(t);if(!i)return s.href;s.searchParams.set("webInteractiveId",String(i.webInteractiveId));s.searchParams.set("containerType",i.containerType);s.searchParams.set("portalId",String(this.environmentModel.portalId));i.campaignGuid&&s.searchParams.set("campaignId",i.campaignGuid);const n=this.analyticsStore.analytics;n&&Object.entries(n).forEach(([e,t])=>{t&&s.searchParams.set(e,String(t))});const r=this.timingMap.get(t);if(r){s.searchParams.set("timeStarted",String(r));s.searchParams.set("timeFinished",String(Date.now()))}return s.href}}function ns(e){return new is(e)}class rs{constructor({configModel:e,customerCtaOptions:t,scheduleCTA:s}){this.defferedPromiseMap=new Map;this.handleCtaLoad=({id:e})=>{if(!this.defferedPromiseMap.has(e))return;this.defferedPromiseMap.get(e)(null);this.defferedPromiseMap.delete(e)};this.handleNavigate=({id:e})=>{const t=this.customerCtaOptions.options.get(e);t&&"function"==typeof t.onNavigate&&t.onNavigate()};this.loadCta=e=>new Promise((t,s)=>{e||s(new Error("Invalid options"));const{contentId:i,options:n}=e,{elementToEmbed:r}=n,o=l(n,["elementToEmbed"]);i||s(new Error("Invalid options"));this.scheduleCTA(i,Array.isArray(r)?r:[r]);Object.keys(o).length&&this.customerCtaOptions.setOption(i,o);this.defferedPromiseMap.set(i,t)});this.configModel=e;this.customerCtaOptions=t;this.scheduleCTA=s;window.hsCtasOnReady=window.hsCtasOnReady||[];this.attachToWindow();this.registerHandlers()}init(){this.flushOnReadyQueue()}registerHandlers(){i.GlobalIframeCommunication.registerHandlers({[i.MessageTypes.STARTED]:this.handleCtaLoad,[i.MessageTypes.NAVIGATE_PAGE]:this.handleNavigate})}attachToWindow(){window.__PRIVATE__HubspotCtaClient={loadCta:this.loadCta}}flushOnReadyQueue(){const e=window.hsCtasOnReady;for(;e.length;){const t=e.shift();"function"==typeof t&&t()}Object.defineProperty(window.hsCtasOnReady,"push",{value:e=>{"function"==typeof e&&e()},writable:!0})}}function os(e){return new rs(e)}const as=(...e)=>{Object(n.a)("[NonFramedCTA]",...e)};class cs{constructor({cta:e,onNavigate:t,onView:s}){this.removeEventListenerCallbacks=[];this.elementObserver=Object(i.createElementObserver)();this.hasView=!1;this.id="";this.cta=e;this.id=this.cta.id;this.onNavigate=t;this.onView=s;this.listenForAnchorClicks();this.listenForView()}getCtaInstance(){this.cta&&this.cta.parentNode||(this.cta=document.getElementById(this.id));return this.cta}replaceCtaInstance(e){as("Replacing html",e,this.id);const t=this.getCtaInstance();if(!t)return;const s=q(t,e);this.removeExistingEventListeners();t.innerHTML=s.innerHTML;t.dataset.rendered="true";this.reapplyEventListeners(t)}removeExistingEventListeners(){this.hasView||this.elementObserver.unobserve(this.cta);this.removeEventListenerCallbacks.forEach(e=>e());this.removeEventListenerCallbacks=[]}reapplyEventListeners(e){this.id=e.id;this.cta=e;this.listenForAnchorClicks();this.hasView||this.listenForView()}listenForAnchorClicks(){const e=[...this.cta.querySelectorAll("a")];"A"===this.cta.tagName&&e.push(this.cta);for(const t of e){const e="_blank"===t.target,s=e=>{e.preventDefault()},i=s=>{s.preventDefault();vt(s)&&this.onNavigate(t.href,e)},n=s=>{if("Enter"===s.key){s.preventDefault();this.onNavigate(t.href,e)}};t.addEventListener("click",s);t.addEventListener("mouseup",i);t.addEventListener("keypress",n);this.removeEventListenerCallbacks.push(()=>{t.removeEventListener("click",s);t.removeEventListener("mouseup",i);t.removeEventListener("keypress",n)})}}listenForView(){this.elementObserver.observe(this.cta,()=>{this.onView();this.hasView=!0;this.elementObserver.unobserve(this.cta)})}}function ls(e){return new cs(e)}var hs=s(8);const ds="render/html";function us(e){let{isHubspotPage:t}=e,s=l(e,["isHubspotPage"]);const i={};t&&(i.isHubspotPage="true");return d(Object.assign({},s,{extraParams:i,path:ds}))}class ms{constructor(){this.handleFetchFailed=()=>{this.store.setState(e=>Object.assign({},e,{requestError:!0}))};this.handleFetchSucceded=e=>{this.store.setState(t=>Object.assign({},t,{renderedHtmlMap:Object.assign({},t.renderedHtmlMap,{htmlMap:e}),isLoaded:!0}))};const e={renderedHtmlMap:{},request:null,requestError:!1,isLoaded:!1};this.store=new i.Store(e)}init(e){this.store.setState(t=>Object.assign({},t,{request:e}));return this.fetchEmbeddedHtml()}subscribe(e){this.store.subscribe(e)}get renderedHtmlMap(){return this.store.state.renderedHtmlMap}get isLoaded(){return this.store.state.isLoaded}fetch(e){return fetch(e).then(e=>{console.log(e);if(!e.ok){this.handleFetchFailed();return Promise.resolve(null)}return e.json().then(e=>{this.handleFetchSucceded(e);return e}).catch(this.handleFetchFailed)}).catch(this.handleFetchFailed)}fetchEmbeddedHtml(){const e=this.store.state.request;if(!e)return Promise.resolve(null);const t=us(e);return this.fetch(t)}}var ps=new ms;const gs=(...e)=>{Object(n.a)("[NonFramedCTAController",...e)};class fs{constructor({handleView:e,configStore:t,handleNavigation:s,analyticsStore:i,environmentModel:n,metricsController:r,scheduledCTAsModel:o}){this.componentMap=new Map;this.cleanupFuncs=[];this.flushScheduledCTAs=()=>{for(const e of this.scheduledCTAsModel.scheduledCTAs){const t=this.configStore.embeddedConfigs.get(e);if(!t||!t.isHTMLVersionOnly)return;if(!this.scheduledCTAsModel.elementsForEmbeddedCTAs.has(e))return;const s=this.scheduledCTAsModel.elementsForEmbeddedCTAs.get(e);let i=this.nonFramedCTAContainers.get(e);i||(i=[]);this.nonFramedCTAContainers.set(e,[...i,...s]);this.createViewsForElements(e,s);this.requestHTML();this.scheduledCTAsModel.removeCTA(e)}};this.getAnchorsFromElements=e=>{let t=[];e.forEach(e=>{"A"===e.tagName&&(t=[...t,e]);t=[...t,...e.querySelectorAll("a")]});return t};this.handleView=e;this.handleNavigation=s;this.configStore=t;this.analyticsStore=i;this.environmentModel=n;this.renderedHtmlStore=ps;this.metricsController=r;this.scheduledCTAsModel=o}init({nonFramedCTAContainers:e}){this.nonFramedCTAContainers=e;e.size&&this.requestHTML();this.listenForConfigs();this.listenForScheduledCTAs();this.environmentModel.isPreview||this.environmentModel.isPreviewPage||this.listenForAnalyticsUpdate()}listenForScheduledCTAs(){this.scheduledCTAsModel.subscribe(this.flushScheduledCTAs)}cleanup(){this.cleanupFuncs.forEach(e=>e())}requestHTML(){const e=e=>{if(e){this.metricsController.trackRender(!0);Object.keys(e).forEach(t=>{const s=Number(t),i=e[s],n=this.componentMap.get(s);if(n)n.forEach(e=>{e.replaceCtaInstance(i)});else{gs("Views not created yet, just replacing existing elements");const e=this.nonFramedCTAContainers.get(s);e&&e.length&&e.forEach(e=>{const t=q(e,i);e.innerHTML=t.innerHTML;e.dataset.rendered="true"})}this.hydrateLinksWithAllData(s)})}},{isPreview:t,currentUrl:s,portalId:i,env:n,hublet:r,versionId:o}=this.environmentModel,a=[...this.nonFramedCTAContainers.keys()].filter(e=>!this.renderedHtmlStore.renderedHtmlMap[e]);if(!a.length)return;const c={contentIds:a,currentUrl:s,portalId:i,env:n,hublet:r,analytics:this.analyticsStore.analytics,isPreview:t,versionId:o,isHubspotPage:this.environmentModel.isCos()};gs("Requesting HTML",c);this.renderedHtmlStore.init(c).then(e).catch(e=>{console.error(e);this.metricsController.trackRender(!1)})}createViewsForElements(e,t){const s=[];let i=0;for(const n of t){n.id=`hs-cta-${e}-${i++}`;const r=ls({cta:n,onNavigate:(t,s)=>{this.handleNavigation(t,e,s)},onView:()=>{this.handleView(e)}});s.push(r);const o=this.configStore.configs.get(e);if(o){const e=this.getAnchorsFromElements(t);Object(hs.a)({webInteractiveId:o.webInteractiveId,containerType:o.containerType,campaignId:o.campaignGuid,pageUrl:this.environmentModel.currentUrl,portalId:this.environmentModel.portalId},e)}}const n=this.componentMap.get(e)||[];this.componentMap.set(e,[...n,...s])}createViews(){for(const[e,t]of this.nonFramedCTAContainers)this.createViewsForElements(e,t)}hydrateLinksWithAllData(e){let t={};const s=this.configStore.configs.get(e);s&&(t={webInteractiveId:s.webInteractiveId,containerType:s.containerType,campaignId:s.campaignGuid,pageUrl:this.environmentModel.currentUrl,portalId:this.environmentModel.portalId});const i=this.analyticsStore.analytics;t=Object.assign({},t,{},i);let n=[];for(const[,e]of this.nonFramedCTAContainers)n=[...n,...this.getAnchorsFromElements(e)];Object(hs.a)(t,n)}listenForConfigs(){this.cleanupFuncs.push(this.configStore.subscribe(()=>{this.scheduledCTAsModel.scheduledCTAs.size>0&&this.flushScheduledCTAs();this.createViews()}))}listenForAnalyticsUpdate(){const e=()=>{let e=[];for(const[,t]of this.nonFramedCTAContainers)e=[...e,...this.getAnchorsFromElements(t)];Object(hs.a)(this.analyticsStore.analytics,e)};this.analyticsStore.analytics.isLoaded?e():this.cleanupFuncs.push(this.analyticsStore.subscribe((t,s)=>{!s.isLoaded&&t.isLoaded&&e()}))}}function vs(e){return new fs(e)}class Cs{constructor(){const e={options:new Map};this.store=new i.Store(e)}subscribe(e){this.store.subscribe(e)}setOption(e,t){const{openInNewTab:s,onNavigate:i}=t;l(t,["openInNewTab","onNavigate"]);this.store.setState(t=>{const n=structuredClone(t.options);n.set(e,{openInNewTab:s,onNavigate:i});return Object.assign({},t,{options:n})})}get options(){return this.store.state.options}}function Ts(){return new Cs}class bs{constructor(){const e={scheduledCTAs:new Set,elementsForEmbeddedCTAs:new Map};this.store=new i.Store(e)}subscribe(e){this.store.subscribe(e)}scheduleCTA(e){this.store.setState(t=>Object.assign({},t,{scheduledCTAs:new Set([...t.scheduledCTAs,e])}))}scheduleEmbeddedCTA(e,t){this.store.setState(s=>Object.assign({},s,{scheduledCTAs:new Set([...s.scheduledCTAs,e]),elementsForEmbeddedCTAs:Object(i.mergeMaps)(s.elementsForEmbeddedCTAs,new Map([[e,t]]))}))}removeCTA(e){this.store.setState(t=>{const s=structuredClone(t.scheduledCTAs);s.delete(e);return Object.assign({},t,{scheduledCTAs:s,elementsForEmbeddedCTAs:Object(i.filterMap)(t.elementsForEmbeddedCTAs,(t,s)=>s!==e)})})}get scheduledCTAs(){return this.store.state.scheduledCTAs}get elementsForEmbeddedCTAs(){return this.store.state.elementsForEmbeddedCTAs}}function ys(){return new bs}const ws=(...e)=>{Object(n.a)("[WebInteractiveApplicationContainer]",...e)};function Es(e){const[t,s]=e.split("?");if(!s)return{location:t,queryParams:{}};return s.split("&").reduce((e,t)=>{const[s,i]=t.split("=");return Object.assign({[s]:i},e)},{})}const Ss="WebInteractives:FitContentHeight";class Is extends i.ParentApplicationController{constructor({configStore:e,environmentModel:t}){super();this.scheduleCTA=(e,t)=>{t?this.scheduledCTAs.scheduleEmbeddedCTA(e,t):this.scheduledCTAs.scheduleCTA(e);this.configStore.fetchConfigsWithIds([e])};this.handleView=e=>{this.ctaViewedStore.markAsViewed(e);this.analyticsProxyController.flushViewQueue(e)};this.handleNavigation=(e,t,s=!1)=>{const n=this.getNavigationUrl({url:e,openNewTab:s},t);Object(i.navigatePage)(n,s)};this.configStore=e;this.environmentModel=t;this.ctaViewedStore=R();this.customerCTAOptions=Ts();this.scheduledCTAs=ys();this.overlayedInteractivesController=new _t({configModel:this.configStore,environmentModel:t,analyticsModel:this.analyticsStore,scheduledCTAsModel:this.scheduledCTAs,handleView:this.handleView,scheduleCTA:this.scheduleCTA});this.embeddedInteractivesController=new Rt({environmentModel:t,configStore:e,scheduledCTAsModel:this.scheduledCTAs,analyticsModel:this.analyticsStore,handleView:this.handleView});this.ignorerController=Dt({configStore:e,environmentModel:t});this.previewController=jt({environmentModel:this.environmentModel});this.responsiveController=Xt();this.metricsController=es({environmentModel:this.environmentModel,configStore:e});this.ctaAnalyticsController=ns({configsStore:this.configStore,analyticsStore:this.analyticsStore,environmentModel:this.environmentModel,ctaViewedStore:this.ctaViewedStore});this.apiClientController=os({configModel:this.configStore,customerCtaOptions:this.customerCTAOptions,scheduleCTA:this.scheduleCTA});this.nonFramedCTAController=vs({configStore:this.configStore,handleView:this.handleView,analyticsStore:this.analyticsStore,handleNavigation:this.handleNavigation,environmentModel:this.environmentModel,metricsController:this.metricsController,scheduledCTAsModel:this.scheduledCTAs});this.listenForConfigs()}init(){this.environmentModel.init();this.metricsController.init();this.previewController.init();this.responsiveController.init();this.parsedDomResults=U();this.configStore.init(this._buildConfigRequest()).then(e=>{this.processConfigResponse(e)}).catch(e=>{console.error(e)});this.embeddedInteractivesController.init({embedContainers:this.parsedDomResults.embedContainers});this.nonFramedCTAController.init({nonFramedCTAContainers:this.parsedDomResults.nonFramedCTAContainers});this.overlayedInteractivesController.init({clickTriggerButtons:this.parsedDomResults.clickTriggerButtons});this.ctaAnalyticsController.init();this.apiClientController.init()}_buildConfigRequest(){let e=[];const{isPreview:t,previewId:s,currentUrl:i,portalId:n,env:r,hublet:o,isMobile:a,templatePath:c,versionId:l}=this.environmentModel;e=t&&s?[s]:[...this.parsedDomResults.uniqueIds];return{contentIds:e,currentUrl:i,portalId:n,env:r,hublet:o,analytics:Object.assign({},this.analyticsStore.store.state),isMobile:a,isPreview:t,templatePath:c,versionId:l}}getNavigationUrl({url:e},t){const s=new URL(e);if(!s.searchParams.has("encryptedPayload"))return e;const i=Es(e),n=this.configStore.configs.get(t);if(!n)return e;s.searchParams.set("webInteractiveId",String(n.webInteractiveId));s.searchParams.set("containerType",n.containerType);n.campaignGuid&&s.searchParams.set("campaignId",n.campaignGuid);this.analyticsStore.analytics.hutk&&s.searchParams.set("hutk",this.analyticsStore.analytics.hutk);s.searchParams.delete("encryptedPayload");return decodeURIComponent(i.encryptedPayload)===i.encryptedPayload?`${s.href}&encryptedPayload=${encodeURIComponent(i.encryptedPayload)}`:`${s.href}&encryptedPayload=${i.encryptedPayload}`}getShouldOpenNewTab(e,t){if(!this.customerCTAOptions.options.has(t))return e.openNewTab;return this.customerCTAOptions.options.get(t).openInNewTab||!1}listenForConfigs(){this.configStore.subscribe((e,t)=>{setTimeout(()=>{if(e.configs.size!==t.configs.size)for(const[e,t]of this.configStore.configs)i.GlobalIframeCommunication.broadcast(e,{type:i.MessageTypes.SEND_CTA_CONFIG,payload:Object.assign({portalId:this.environmentModel.portalId,pageUrl:this.environmentModel.currentUrl,gates:this.environmentModel.gates},t)})})})}processConfigResponse(e){if(e&&Array.isArray(e.gates)){ws("Retrieved Gates from config response",e.gates);this.environmentModel.setGates(e.gates);this.environmentModel.isUngatedFor(Ss)&&this.sendHeightOverrideMessage()}}sendHeightOverrideMessage(){i.GlobalIframeCommunication.broadcastAll({type:i.MessageTypes.OVERRIDE_BODY_HEIGHT,payload:{}})}}const Os=new Is({configStore:T,environmentModel:L});window.__hsWebInteractiveInstance=Os;var As=Os;const Ms=()=>!(!window.disabledHsPopups||!(window.disabledHsPopups.indexOf("LEADFLOW")>-1||window.disabledHsPopups.indexOf("CTAS")>-1))||!!window.hsInEditor,Ps=()=>{if(!Ms())if(window.hubspot_web_interactives_running)console.error("duplicate instance of web interactives app exists");else{As.init();window.hubspot_web_interactives_running=!0}},_s=()=>{Ps();document.removeEventListener("DOMContentLoaded",_s)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",_s):Ps()},function(e,t,s){"use strict";var i=s(3),n=s(4);const r=(...e)=>{Object(i.a)("[GlobalIframeCommunication]",...e)};class o{constructor(){this.iframeCommunicators=new Map;this.eventEmitter=Object(n.a)();this.reset=()=>{this.eventEmitter.reset();this.iframeCommunicators=new Map}}registerHandler(e,t){this.eventEmitter.on(e,t)}registerHandlers(e){r("Registering handlers",e);Object.keys(e).forEach(t=>{const s=t,i=e[s];i&&this.registerHandler(s,i)})}registerCommunicator(e,t){r("Registering communicator",t);const s=this.iframeCommunicators.get(t)||[];this.iframeCommunicators.set(t,[...s,e])}emit(e,t){r("Emitting event",{event:e,messagePayload:t});this.eventEmitter.emit(e,t)}broadcast(e,t){const s=this.iframeCommunicators.get(e);if(s){r("Broadcasting",s);s.forEach(e=>{e.sendMessage(t)})}else r("Cannot find communcators array, not broadcasting",e,t)}broadcastAll(e){r("Broadcasting",e,"to all",this.iframeCommunicators);for(const[t,s]of this.iframeCommunicators)this.broadcast(t,e)}}var a=new o,c=s(1);function l(){return new MessageChannel}const h=(...e)=>{Object(i.a)("[setStyleOnElement]",...e)};class d{constructor(e,t){this.queue=[];this.initialised=!1;this.events=new Map;this.eventEmitter=Object(n.a)();this.handleMessage=e=>{if(!e.data||!e.data.type)return;const{type:t,payload:s}=e.data;h("Handling message",{type:t,payload:s});this.eventEmitter.emit(t,s);a.emit(t,Object.assign({},s,{id:this.id}))};this.handleFrameLoaded=()=>{if(this.iframe.contentWindow){h("Iframe loaded",this.iframe);this.iframe.contentWindow.postMessage({type:c.a.INIT},"*",[this.channel.port2]);this.initialised=!0;this.flushQueue()}else h("Content window not there, not loading")};this.iframe=e;this.id=t;this.channel=l();this.channel.port1.onmessage=this.handleMessage;this.iframe.addEventListener("load",this.handleFrameLoaded);h("Iframe communication set up",t,e)}sendMessage({type:e,payload:t}){if(this.initialised){h("Posting message",{type:e,payload:t});this.channel.port1.postMessage({type:e,payload:t})}else{h("Queueing message",{type:e,payload:t});this.queue.push({type:e,payload:t})}}registerHandler(e,t){this.eventEmitter.off(e);this.eventEmitter.on(e,t)}registerHandlers(e){h("Registering handlers in IframeCommunication",e);Object.keys(e).forEach(t=>{const s=t,i=e[s];i&&this.registerHandler(s,i)})}removeHandler(e){h("Removing handler",e);this.eventEmitter.off(e)}flushQueue(){if(this.initialised){h("Flushing queue",this.queue);this.queue.forEach(e=>{this.sendMessage(e)})}else h("Not flushing queue, not initialised")}}function u(e,t){h("Creating iframe communication");const s=new d(e,t);a.registerCommunicator(s,t);return s}function m(e){const t=window.location.origin.startsWith("http:")?"http://":"https://";return e.startsWith(t)?e:`${t}${e.replace(/http(s)?:\/\//,"")}`}function p(e){e.style.border="none";e.style.height="100%";e.style.width="100%";e.style.visibility="hidden"}function g(e,t){const s=document.createElement("iframe");s.src=m(e);Object.keys(t).forEach(e=>{s.setAttribute(e,t[e])});p(s);return s}var f=s(2),v=s(5);const C=(...e)=>{Object(i.a)("[FrameComponent]",...e)},T=()=>{};class b{constructor({id:e,container:t,iframeSrc:s,resizeHeight:i,onFrameReady:n,useResponsiveStyling:r,extraAttributes:o={}}){this.onFrameReady=T;this.resizeHeight=!0;this.handleHeightChange=({height:e})=>{if(!this.resizeHeight)return;const t=e+2*parseInt(getComputedStyle(this.iframe).borderTopWidth,10);C("Handle height change",this.id,{adjustedHeight:t,height:e});this.setContainerStyle({height:t+"px"})};this.id=e||1;this.resizeHeight=i;if(r){C("Responsive styling is enabled",e);s=Object(v.a)(s,"enableResponsiveStyles","true")}this.iframe=g(s,o);this.container=t;this.iframeCommunicator=u(this.iframe,e||1);n&&(this.onFrameReady=n);t.appendChild(this.iframe);this.registerHandlers()}registerHandlers(){this.iframeCommunicator.registerHandlers({[c.a.STARTED]:this.onFrameReady,[c.a.NEW_HEIGHT]:this.handleHeightChange})}setStyle(e){C("Set style",this.id,e);Object(f.a)(this.iframe,e)}setShouldResize(e){this.resizeHeight=e}setContainerStyle(e){Object(f.a)(this.container,e)}}function y(e){return new b(e)}s.d(t,"d",(function(){return u}));s.d(t,"c",(function(){return g}));s.d(t,"b",(function(){return y}));s.d(t,"a",(function(){return a}))},function(e,t,s){"use strict";s(7),s(1),s(8);s(9);s(4)},function(e,t,s){"use strict";var i=s(0);const n="hubspotutk",r="__hstc",o="__hssc",a=e=>{const t=document.cookie.match(`(^|[^;]+)\\s*${e}\\s*=\\s*([^;]+)`);return t?t.pop():""},c=()=>a(n),l=()=>a(r),h=()=>a(o);var d=s(3);const u=(...e)=>{Object(d.a)("[models/Analytics]",...e)};class m{constructor(){this._handleFetchSucceded=e=>{this.store.setState(t=>{const s={};s.path=e.path;s.referrerPath=e.referrerPath;s.referrer="";s.analyticsPageId=e.pageId;s.hsfp=e._getFingerprint();s.canonicalUrl=e.canonicalUrl;s.contentType=e.contentType;s.pageId=m.getPageId()||e.pageId;e.session&&(s.hssc=e.session.get());if(e.utk){s.hstc=e.utk.get();s.hutk=e.utk.visitor}return Object.assign({},t,{},s,{isLoaded:!0})})};window._hsq=window._hsq||[];const e={isLoaded:!1,pageUrl:window.location.href,pageTitle:window.document.title,referrer:window.document.referrer,userAgent:window.navigator.userAgent,hutk:c(),hssc:h(),hstc:l(),pageId:m.getPageId()};this.store=new i.Store(e);this.fetchAnalytics()}fetchAnalytics(){this._analyticsQueue.push(this._handleFetchSucceded)}subscribe(e){return this.store.subscribe(e)}get analytics(){return this.store.state}track(e){u("Tracking analytics",e);this._analyticsQueue.push(e)}get _analyticsQueue(){return window._hsq}static getPageId(){const e=window.hsVars;return e&&e.analytics_page_id?e.analytics_page_id:e&&e.page_id?e.page_id:null}}var p=new m,g=s(21),f=s(1);const v=(...e)=>{Object(d.a)("[AnalyticsProxyController]",...e)},C=["trackFormView"];class T{constructor({applicationController:e,analyticsStore:t}){this.viewQueue=new Map;this.applicationController=e;this.analyticsStore=t;this.listenForAnalyticsUpdate();this.listenForProxyMessage()}listenForAnalyticsUpdate(){this.analyticsStore.subscribe((e,t)=>{!t.isLoaded&&e.isLoaded&&g.a.broadcastAll({type:f.a.RECEIVED_ANALYTICS,payload:e})})}flushViewQueue(e){const t=this.viewQueue.get(e)||[];for(const e of t)this.analyticsStore.track(e);this.viewQueue.delete(e)}handleFormView(e,t){const s=this.viewQueue.get(e)||[];v("Adding form view to analytics queue",{id:e,analytics:t});this.viewQueue.set(e,[...s,t])}listenForProxyMessage(){g.a.registerHandlers({[f.a.PROXY_ANALYTICS]:({analytics:e,id:t})=>{T.isFormView(e)?this.handleFormView(t,e):this.analyticsStore.track(e)}})}static isFormView(e){const[t]=e;return C.includes(t)}}var b=s(10);class y{constructor({applicationController:e}){this.applicationController=e;this.listenForNavigation()}listenForNavigation(){g.a.registerHandlers({[f.a.NAVIGATE_PAGE]:({url:e,openNewTab:t,id:s})=>{const i=this.applicationController.getNavigationUrl({url:e,openNewTab:t},s),n=this.applicationController.getShouldOpenNewTab({url:e,openNewTab:t},s);Object(b.a)(i,n)}})}}s.d(t,"a",(function(){return w}));class w{constructor(){this.analyticsStore=p;this.analyticsProxyController=new T({analyticsStore:this.analyticsStore,applicationController:this});this.navigationProxyController=new y({applicationController:this})}getNavigationUrl(e,t){return e.url}getShouldOpenNewTab(e,t){return e.openNewTab}}},function(e,t,s){"use strict";class i{constructor({onTrigger:e}){this.isExitIntent=e=>{if(!e)return!1;return!e.relatedTarget&&e.clientY<100};this.handleMouseOut=e=>{this.isExitIntent(e)&&this.onTrigger(this)};this.onTrigger=e;this.setup()}setup(){document.addEventListener("mouseout",this.handleMouseOut)}remove(){document.removeEventListener("mouseout",this.handleMouseOut)}}const n=1e3,r=["mousedown","mousemove","keypress","scroll","touchstart"];class o{constructor({onTrigger:e,value:t}){this.resetTimer=()=>{this.timeout&&clearTimeout(this.timeout);this.timeout=setTimeout(()=>this.onTrigger(this),this.seconds)};this.onTrigger=e;this.seconds=t*n;this.timeout=null;this.setup()}setup(){this.timeout=setTimeout(()=>this.onTrigger(this),this.seconds);r.forEach(e=>{document.addEventListener(e,this.resetTimer)})}remove(){r.forEach(e=>{document.removeEventListener(e,this.resetTimer)});this.timeout&&clearTimeout(this.timeout)}}function a(){let e=!1;try{const t={get passive(){e=!0}};window.addEventListener("test",t,t);window.removeEventListener("test",t,t)}catch(t){e=!1}return e}function c(){return Math.max(document.body.offsetHeight,document.body.scrollHeight)}function l(){return Math.max(window.innerHeight||0,document.documentElement.clientHeight)}function h(){return document.body.scrollTop||document.documentElement.scrollTop}class d{constructor({onTrigger:e,value:t}){this.handleScroll=()=>{const e=c()-l();100*h()/e>=this.scrollPercent&&this.onTrigger(this)};this.onTrigger=e;this.scrollPercent=t;this.supportsPassiveScrolling=a();this.setup()}setup(){this.supportsPassiveScrolling?window.addEventListener("scroll",this.handleScroll,{capture:!0,passive:!0}):window.addEventListener("scroll",this.handleScroll,!0)}remove(){this.supportsPassiveScrolling?window.removeEventListener("scroll",this.handleScroll,{capture:!0}):window.removeEventListener("scroll",this.handleScroll,!0)}}const u=1e3;function m(){return document.timeline&&document.timeline.currentTime?document.timeline.currentTime:performance?performance.now():0}class p{constructor({onTrigger:e,value:t}){this.onTrigger=e;const s=m();this.ms=Math.max(t*u-s,0);this.timeout=null;this.setup()}setup(){this.timeout=setTimeout(()=>{this.onTrigger(this)},this.ms)}remove(){this.timeout&&clearTimeout(this.timeout)}}s.d(t,"a",(function(){return g}));function g(e,t){const{showOnPageScroll:s,showOnExitIntent:n,showAfterDelay:r,showAfterInactivity:a,pageScrollPercentageTrigger:c,delayInSeconds:l,inactivityInSeconds:h}=e,u=[];s&&u.push(new d({onTrigger:t,value:c||0}));n&&u.push(new i({onTrigger:t}));r&&u.push(new p({onTrigger:t,value:l||0}));a&&u.push(new o({onTrigger:t,value:h||0}));return u}}]);